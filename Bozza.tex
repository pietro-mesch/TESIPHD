\documentclass[11pt,a4paper,twoside]{book}

\author{Pietro Meschini}
\title{Forse non muore nessuno neanche stavolta}

\usepackage{mzk}

\begin{document}

\chapter{La rete viaria urbana}
Formalizzazione, tutta la roba dal libro di Gaetano.

\chapter{Semafori Intelligenti}
\section{Semaforizzazione adattiva}
Perché fare i semafori che si adattano in tempo reale?

Reattività alle condizioni inaspettate nel breve periodo

Reattività agli incidenti

\subsection{Il dilemma dell'ottimizzazione}
In fondo è un modo di migliorare l'offerta per il traffico veicolare privato, causandone l'aumento.

Inoltre incidenti, traffico smodato e imprevedibile sono tutte prerogative del trasporto privato. Si farebbe prima a cercare di curare il bisogno di trasporto privato che ad arginarne gli effetti dannosi.

L'unica ragione per fare ricerca nel campo dell'ottimizzazione semaforica è quella di vedere se attraverso i metodi euristici si riescono ad individuare soluzioni efficaci nel medio e lungo termine 

\section{Tipi di ottimizzazione}
Tipi di ottimizzazione, roba dal libro.

\subsection{BALANCE}

\begin{itemize}
\item Il modello è meglio o peggio di TRE ?
\item Perché usare TRE che è molto più lento?
\item come funziona BAL e cosa può fare?
\end{itemize}

Balance ha un modellino \emph{mesoscopico} tipo gltm (n realtà è proprio come GLTM al secondo) e fa un taglio delle reti intorno alle junction che vuole controllare. Sugli ingressi alle sottoreti (una per ogni junction) usa profili di flusso costanti, ma se può usa i flussi uscenti di una junction per determinare i flussi entranti in una a valle (propagazione).

Il modello viene usato per ricavare le funzioni di costo FERMATE, LUNGHEZZA CODE (in realtà numero di veh in coda) e PERDITEMPO.
Lui vede le code come F-E perché i suoi archi sono in realtà le corsie di svolta, ed usa una lunghezza MASSIMA per le code.

Punti di forza di Balance:
\begin{itemize}
\item Fa tante intersezioni
\item E' veloce
\item Aggiusta anche le durate degli stage
\end{itemize}

Punti deboli:
\begin{itemize}
\item Non è detto che le intersezioni si parlino tanto bene
\item Non guarda avanti
\item non vede l'arco ma solo l'approccio: forse una volta che la coda ha raggiunto il sensore per lui tutte le situazioni sono uguali, e sotto carico non gli cambia più niente
\item Probabilmente tende a massimizzare la capacità dove è più richiesta, favorendo lo scorrimento ma provocando un comportamento "ingordo" che crea problemi a valle.
\end{itemize}

\subsubsection{Requisiti}
Balance lavora stage based, cambiando gli istanti di inizio degli interstage.
Per forzare il comportamento "solo offset" bisogna bloccare la durata degli stage, e lasciare libertà totale a tutti gli interstage.

Serve un detector con channel unico per ogni corsia interessante di approccio all'intersezione.


\chapter{Obiettivi Intelligenti}
Definizione degli obiettivi dell'ottimizzazione classica e di quella sostenibile.

Formalizzazione delle funzioni di costo:
l'indice di coda (integrale tempo in coda per veicoli)/tempo passato nel corridoio fa cacare
$$
\frac{\sum_{a \in C} \sum_{t \in T}{queu_{at}}}{\sum_{a \in C} \sum_{t \in T}{n_{at}}}
$$

non è reattivo soprattutto se gli archi sono lunghi perché il tempo in coda è comunque poco rispetto al totale

ci vorrebbe tempo per km percorso, ma come faccio a calcolare lo spazio percorso?

Numero di fermate non è male, calcolato come integrale dell'aumento della QUEU in ogni intervallo, corretto aggiungendo l'eventuale deflusso se la coda alla fine dell'intervallo non si è azzerata.
Questo comporta degli errori (da quantificare esattamente?) negli intervalli in cui la coda comincia o finisce.
$$
\sum_{a \in C} \sum_{t \in T} QUEU_{a,t} - QUEU_{a,t-1} + OFLW_{a,t} \Delta t
$$


Il tutto è da normalizzare rispetto al numero di veicoli entrati su qualsiasi arco.

Altro obiettivo utile sarebbe guardare la congestione degli archi.
Prendendo la congestione media si auto-pesano di più gli archi corti, il che avrebbe senso.
Come indicatore della congestione, dal GLTM prendiamo la lunghezza della coda peggiore nell'intervallo rispetto all'arco $QUEL\in[0,1]$ quindi come funzione di costo
\eq{e:maxqueue}{
Q_{a}^{MAX} = \sup\{QUEL_{a,t}|t\in T\}
}



\chapter{Ottimizzazione con GLTM Genetico}
Perché è una buona idea?
E' una simulazione in grado di tenere conto di fenomeni complessi ma più veloce della micro.

L'infrastruttura contiene dati in tempo reale etc.

Condizioni dei test di TRE:
\begin{enumerate}
\item TRE fa un equilibrio e produce TPRB per tutto il giorno: gli intervalli sono ben più lunghi di un ciclo di semaforo quindi le svolte sono mediate e dipendono solo da domanda e green share
\item TRE salva l'istantanea dei flussi per cominciare le simulazioni di ottimizzazione a rete carica
\item Gli offset vengono modificati e per ogni individuo si fa un caricamento al secondo su una finestra temporale ristretta, partendo dall'istantanea salvata
\end{enumerate}

\fig{htbp}{PIX/DIAG-dta-scheme_550x320.png}{f:ass}{L'assegnazione di TRE}{width=0.8\textwidth}

Quantificare errori dovuti all'uso di TPRB fisse 

Data una finestra temporale di una certa lunghezza

\section{General Link Transmission Model}
Funzionamento generale, pregi e limitazioni rispetto all'applicazione come ottimizzatore.

Quale intervallo di risultati si può usare? Data l'incertezza e le approssimazioni, ha senso usare i risultati al secondo?

Non varrebbe la pena guadagnare tempo usando intervalli di 6s ?
\emph{Non importa, si guadagna tempo ma per ora il tempo non ci preoccupa. Semmai si fa una prova a posteriori una volta determinato quale combinazione degli altri parametri funziona meglio}.


\section{Il modello in tempo reale}

\subsection{Corridoio di ottimizzazione}
Definito come una serie di link.
I link attraversano un certo numero di intersezioni, alcune delle quali sono amministrate da un semaforo.
Fra l'inizio e il primo semaforo, fra i semafori, e dopo l'ultimo, i link sono accorpati in sezioni. I KPI vengono calcolati su di essi.

\section{Tuning del modello}


\section{Tuning del Genetico}
Effetti dimensioni popolazione, aggiustamenti mutazione

\chapter{Risultati}
Test da fare:
\begin{description}
\item[Domanda stabile subcritica]
\item[Domanda stabile supercritica]
\item[Riduzione di capacità alla fine del corridoio] per vedere se TreGen tiene le code a monte o fa andare tutti a morire in fondo.
\end{description}



\section{La qualità in termini assoluti}


\section{Il confronto con microsimulazione}


\section{Performance}

\end{document}